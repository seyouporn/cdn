!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.comscore=n())}(this,(function(){"use strict";function e(){}function n(){return"undefined"!=typeof ns_}function t(e,n,t){if("object"==typeof e.comscore){var a=flowplayer.events,d=flowplayer.AdEvents||{AD_STARTED:"ad-started",AD_COMPLETED:"ad-completed",AD_BREAK_COMPLETED:"ad-break-completed"},s=null,i=!1,o=!1,r=!1,c=null,l="",u="",f="",_=!1,m=0,p=null;if(document){document.addEventListener("unload",(function(){E()})),document.addEventListener("pagehide",(function(){E()}));var y=D();if(y){var A=y.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(A,(function(){p&&((e=D())&&document[e]?p.stop():R());var e}))}}t.on([a.METADATA,a.DATA,a.PROGRESS,a.LOAD_START,a.ENDED,a.SEEKED,a.SEEKING,a.PAUSE,a.PLAYING,a.LOAD,a.CONFIG,d.AD_STARTED,d.AD_COMPLETED,d.AD_BREAK_COMPLETED],(function(n){switch(n.type){case"playing":p||(p=T()),i?o&&R():(i=!0,R()),o=!1;break;case"pause":p&&!r&&(o=!0,p.stop());break;case"seeking":case"seeked":break;case"ended":E();break;case"config":t=n,c||(c=e.comscore,l=c.media_title||"*null",u=c.media_id||"*null",f=c.account_id,p=T(),t.data&&(t.data.live&&(_=!0),t.data.title&&(l=t.data.title),t.data.id?u=t.data.id:t.data.metadata&&t.data.metadata.id&&(u=t.data.metadata.id),t.data.duration&&(m=Math.round(1e3*t.data.duration))));break;case"ad-started":h(n);break;case"ad-completed":p&&p.stop();break;case"ad-break-completed":R()}var t}))}function E(){r=!1,i=!1,o=!1,m=0,p&&(p.stop(),s=setInterval(v,1e3))}function v(){s&&clearInterval(s),p&&(p=null)}function D(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var n=0;n<e.length;n++)if(e[n]+"Hidden"in document)return e[n]+"Hidden";return null}function h(n){!function(n){r=!0,null==c&&(c=e.comscore);var t={};n&&n.data&&n.data.ad?t.ns_st_cl=Math.round(1e3*n.data.ad.duration)||0:t.ns_st_cl=0;t.c3=c.c3||"*null",t.c4=c.c4||"*null",t.c6=c.c6||"*null",p&&(_?p.playVideoAdvertisement(t,ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearLive):p.playVideoAdvertisement(t,ns_.ReducedRequirementsStreamingAnalytics.AdType.LinearOnDemandPreRoll))}(n)}function R(){r=!1;var n={};null==c&&(c=e.comscore),n.ns_st_ci=u,n.ns_st_pr=l,n.ns_st_ep=c.ns_st_ep||"*null",n.ns_st_ia=c.ns_st_ia||0,n.ns_st_ge=c.ns_st_ge||"News",n.ns_st_ce=c.ns_st_ce||0,n.ns_st_ddt=c.ns_st_ddt||(new Date).getFullYear()+"-01-01",n.ns_st_tdt=c.ns_st_tdt||(new Date).getFullYear()+"-01-01",n.c3=c.c3||"*null",n.c4=c.c4||"*null",n.c6=c.c6||"*null",m<=0&&(m=Math.round(1e3*t.duration)),n.ns_st_cl=m,p&&(_?(n.ns_st_cl=0,p.playVideoContentPart(n,ns_.ReducedRequirementsStreamingAnalytics.ContentType.Live)):p.playVideoContentPart(n,ns_.ReducedRequirementsStreamingAnalytics.ContentType.ShortFormOnDemand))}function T(){return new ns_.ReducedRequirementsStreamingAnalytics({publisherId:f})}}return function(e,n){if("object"==typeof exports&&"undefined"!=typeof module)return n;"flowplayer"in e||(e.flowplayer={extensions:[]});var t=e.flowplayer;return"function"==typeof t?(t(n),n):(Array.isArray(t.extensions)||(t.extensions=[]),~t.extensions.indexOf(n)||t.extensions.push(n),n)}(window,(function(a,d,s){if(a.comscore&&n())return t(a,0,s);var i,o,r,c;a.comscore&&(i="https://sb.scorecardresearch.com/c2/libraries/js/v6/6.3.1.181004.js",o=function(){n()&&t(a,0,s)},r=document.getElementsByTagName("head")[0],(c=document.createElement("script")).src=i,c.onload=c.onerror=o||e,r.appendChild(c))}))}));

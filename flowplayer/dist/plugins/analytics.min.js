!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):((e=e||self).flowplayer=e.flowplayer||{},e.flowplayer.analytics=t())}(this,(function(){"use strict";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function r(e,t){return e(t={exports:{}},t.exports),t.exports}Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),r=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],i=0;i<r;){var o=t[i];if(e.call(n,o,i,t))return o;i++}},configurable:!0,writable:!0});var n=r((function(e,t){e.exports=function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=70)}({18:function(e,t,r){var n,i;void 0===(i="function"==typeof(n=function(e){var t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return t(e,null,[{key:"getFirstMatch",value:function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""}},{key:"getSecondMatch",value:function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""}},{key:"matchAndReturnConst",value:function(e,t,r){if(e.test(t))return r}},{key:"getWindowsVersionName",value:function(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}},{key:"getVersionPrecision",value:function(e){return e.split(".").length}},{key:"compareVersions",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=e.getVersionPrecision(t),o=e.getVersionPrecision(r),s=Math.max(i,o),a=0,u=e.map([t,r],(function(t){var r=s-e.getVersionPrecision(t),n=t+new Array(r+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=s-Math.min(i,o)),s-=1;s>=a;){if(u[0][s]>u[1][s])return 1;if(u[0][s]===u[1][s]){if(s===a)return 0;s-=1}else if(u[0][s]<u[1][s])return-1}}},{key:"map",value:function(e,t){var r=[],n=void 0;if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n+=1)r.push(t(e[n]));return r}}]),e}();e.exports=r})?n.apply(t,[e]):n)||(e.exports=i)},65:function(e,t,r){var n,i,o;i=[t,r(18)],void 0===(o="function"==typeof(n=function(t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){return{name:"EdgeHTML",version:(0,r.getFirstMatch)(/edge\/(\d+(\.?_?\d+)+)/i,e)}}},{test:[/trident/i],describe:function(e){var t={name:"Trident"},n=(0,r.getFirstMatch)(/trident\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:"Presto"},n=(0,r.getFirstMatch)(/presto\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:"Gecko"},n=(0,r.getFirstMatch)(/gecko\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:"Blink"}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:"WebKit"},n=(0,r.getFirstMatch)(/webkit\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)},66:function(e,t,r){var n,i,o;i=[t,r(18)],void 0===(o="function"==typeof(n=function(t,r){Object.defineProperty(t,"__esModule",{value:!0});var n="tablet",i="mobile",o="desktop";t.default=[{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:n,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:n,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:n,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:n,vendor:"Amazon"}}},{test:[/tablet/i],describe:function(){return{type:n}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=(0,r.getFirstMatch)(/(ipod|iphone)/i,e);return{type:i,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:i,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:i}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:i,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:i}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:i,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:n}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:i}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:o,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:o}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:o}}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)},67:function(e,t,r){var n,i,o;i=[t,r(18)],void 0===(o="function"==typeof(n=function(t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{test:[/windows phone/i],describe:function(e){return{name:"Windows Phone",version:(0,r.getFirstMatch)(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e)}}},{test:[/windows/i],describe:function(e){var t=(0,r.getFirstMatch)(/Windows ((NT|XP)( \d\d?.\d)?)/i,e);return{name:"Windows",version:t,versionName:(0,r.getWindowsVersionName)(t)}}},{test:[/macintosh/i],describe:function(e){return{name:"macOS",version:(0,r.getFirstMatch)(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,".")}}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){return{name:"iOS",version:(0,r.getFirstMatch)(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".")}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){return{name:"Android",version:(0,r.getFirstMatch)(/android[\s/-](\d+(\.\d+)*)/i,e)}}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=(0,r.getFirstMatch)(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),n={name:"WebOS"};return t&&t.length&&(n.version=t),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){return{name:"BlackBerry",version:(0,r.getFirstMatch)(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||(0,r.getFirstMatch)(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||(0,r.getFirstMatch)(/\bbb(\d+)/i,e)}}},{test:[/bada/i],describe:function(e){return{name:"Bada",version:(0,r.getFirstMatch)(/bada\/(\d+(\.\d+)*)/i,e)}}},{test:[/tizen/i],describe:function(e){return{name:"Tizen",version:(0,r.getFirstMatch)(/tizen[/\s](\d+(\.\d+)*)/i,e)}}},{test:[/linux/i],describe:function(){return{name:"Linux"}}}],e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)},68:function(e,t,r){var n,i,o;i=[t,r(18)],void 0===(o="function"==typeof(n=function(t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=/version\/(\d+(\.?_?\d+)+)/i,i=[{test:[/opera/i],describe:function(e){var t={name:"Opera"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},i=(0,r.getFirstMatch)(/(?:opr|opios)[\s/](\S+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},i=(0,r.getFirstMatch)(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},i=(0,r.getFirstMatch)(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},i=(0,r.getFirstMatch)(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},n=(0,r.getFirstMatch)(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},n=(0,r.getSecondMatch)(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},n=(0,r.getFirstMatch)(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},n=(0,r.getFirstMatch)(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},n=(0,r.getFirstMatch)(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return n&&(t.version=n),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},n=(0,r.getFirstMatch)(/silk\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},n=(0,r.getFirstMatch)(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},n=(0,r.getFirstMatch)(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},i=(0,r.getFirstMatch)(n,e)||(0,r.getFirstMatch)(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},n=(0,r.getFirstMatch)(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},i=(0,r.getFirstMatch)(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},i=(0,r.getFirstMatch)(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},n=(0,r.getFirstMatch)(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},i=(0,r.getFirstMatch)(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},n=(0,r.getFirstMatch)(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return n&&(t.version=n),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},i=(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},i=(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},i=(0,r.getFirstMatch)(/googlebot\/(\d+(\.\d+))/i,e)||(0,r.getFirstMatch)(n,e);return i&&(t.version=i),t}},{test:[/.*/i],describe:function(e){return{name:(0,r.getFirstMatch)(/^(.*)\/(.*) /,e),version:(0,r.getSecondMatch)(/^(.*)\/(.*) /,e)}}}];t.default=i,e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)},69:function(e,t,r){var n,i,o;i=[t,r(68),r(67),r(66),r(65),r(18)],void 0===(o="function"==typeof(n=function(t,r,n,i,o,s){Object.defineProperty(t,"__esModule",{value:!0});var a=d(r),u=d(n),c=d(i),f=d(o);function d(e){return e&&e.__esModule?e:{default:e}}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),v=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==r&&this.parse()}return p(e,[{key:"getUA",value:function(){return this._ua}},{key:"test",value:function(e){return e.test(this._ua)}},{key:"parseBrowser",value:function(){var e=this;this.parsedResult.browser={};var t=a.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}},{key:"getBrowser",value:function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}},{key:"getBrowserName",value:function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}},{key:"getBrowserVersion",value:function(){return this.getBrowser().version}},{key:"getOS",value:function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}},{key:"parseOS",value:function(){var e=this;this.parsedResult.os={};var t=u.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}},{key:"getOSName",value:function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""}},{key:"getOSVersion",value:function(){return this.getOS().version}},{key:"getPlatform",value:function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}},{key:"getPlatformType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.getPlatform(),r=t.type;return e?String(r).toLowerCase()||"":r||""}},{key:"parsePlatform",value:function(){var e=this;this.parsedResult.platform={};var t=c.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}},{key:"getEngine",value:function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}},{key:"parseEngine",value:function(){var e=this;this.parsedResult.engine={};var t=f.default.find((function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}},{key:"parse",value:function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}},{key:"getResult",value:function(){return this.parsedResult}},{key:"satisfies",value:function(e){var t=this,r={},n=0,i={},o=0;if(Object.keys(e).forEach((function(t){var s=e[t];"string"==typeof s?(i[t]=s,o+=1):"object"===(void 0===s?"undefined":l(s))&&(r[t]=s,n+=1)})),n>0){var s=Object.keys(r),a=s.find((function(e){return t.isOS(e)}));if(a){var u=this.satisfies(r[a]);if(void 0!==u)return u}var c=s.find((function(e){return t.isPlatform(e)}));if(c){var f=this.satisfies(r[c]);if(void 0!==f)return f}}if(o>0){var d=Object.keys(i).find((function(e){return t.isBrowser(e)}));if(void 0!==d)return this.compareVersion(i[d])}}},{key:"isBrowser",value:function(e){return this.getBrowserName(!0)===String(e).toLowerCase()}},{key:"compareVersion",value:function(e){var t=0,r=e,n=!1,i=this.getBrowserVersion();if("string"==typeof i)return">"===e[0]?(t=1,r=e.substr(1)):"<"===e[0]?(t=-1,r=e.substr(1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),(0,s.compareVersions)(i,r,n)===t}},{key:"isOS",value:function(e){return this.getOSName(!0)===String(e).toLowerCase()}},{key:"isPlatform",value:function(e){return this.getPlatformType(!0)===String(e).toLowerCase()}},{key:"is",value:function(e){return this.isBrowser(e)||this.isOS(e)||this.isPlatform(e)}},{key:"some",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.some((function(t){return e.is(t)}))}}]),e}();t.default=v,e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)},70:function(e,t,r){var n,i,o;i=[t,r(69)],void 0===(o="function"==typeof(n=function(t,r){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){return e&&e.__esModule?e:{default:e}}(r),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"getParser",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"!=typeof e)throw new Error("UserAgent should be a string");return new n.default(e,t)}},{key:"parse",value:function(e){return new n.default(e).getResult()}}]),e}();t.default=o,e.exports=t.default})?n.apply(t,i):n)||(e.exports=o)}})}));t(n);n.bowser;var i=r((function(t,r){var n=e&&e.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};r.__esModule=!0,r.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.reduce((function(e,t){return n({},e,t)}),{})},r.pluck=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return Object.keys(e).filter((function(e){return~t.indexOf(e)})).reduce((function(t,n){var i;return r.merge(t,((i={})[n]=e[n],i))}),{})},r.downcase=function(e){return(e||"").toString().toLowerCase()},r.remove=function(e,t){var r=e.lastIndexOf(t);return~r&&e.splice(r,1),e}}));t(i);i.merge,i.pluck,i.downcase,i.remove;var o=r((function(t,r){var o=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};r.__esModule=!0;var a=o(n),u=s(i),c=a.default.parse(window.navigator.userAgent),f=c.platform,d=c.os,l=c.browser;r.default=function(){try{return{os:u.downcase(d.name+(d.versionName?" "+d.versionName:"")),device:u.downcase(f.type),browser:u.downcase(l.name),browser_version:(l&&l.version?l.version:"unknown").split(".").shift()}}catch(e){return{os:"",device:"",browser:"",browser_version:""}}}()}));t(o);var s=r((function(t,r){var n=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};r.__esModule=!0;var o=n(i),s=function(){function e(){this.pending=[],this.open=[],this.stats={failures:0,ttl:0}}return e.of=function(){return new e},e.is_empty=function(e){return 0==e.pending.length},e.is_high_water=function(t){return t.open.length==e.MAX_OPEN_REQUESTS},e.maybe_spawn_req=function(t){if(e.is_empty(t))return t;if(e.is_high_water(t))return t;try{var r=e.lpop(t);r&&e.request(t,r)}catch(e){}},e.increment_failures=function(t){return t.stats.failures++,t.stats.failures>e.MAX_FAILURE_COUNT&&(t.stats.ttl=Date.now()+e.REQUEST_TTL_MS),t},e.handle_error=function(t,r){e.rm(t,r),e.increment_failures(t)},e.request=function(t,r){var n=r[0],i=r[1],o=r[2];if(!(Date.now()<t.stats.ttl)){var s=new XMLHttpRequest;t.open.push(s),s.timeout=e.REQUEST_TIMEOUT_MS,s.ontimeout=function(){e.handle_error(t,s)},s.onerror=function(r){e.handle_error(t,s)},s.onreadystatechange=function(){s.readyState==XMLHttpRequest.DONE&&e.rm(t,s),Math.floor(s.status/100)},s.onload=function(){e.rm(t,s),t.stats.failures&&t.stats.failures--},s.open(i,n),s.setRequestHeader("Content-Type","text/plain;charset=UTF-8");try{s.send(JSON.stringify(o))}catch(e){}}},e.rpush=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return r.forEach((function(r){t.pending.length>=e.MAX_PENDING||(t.pending.push(r),e.maybe_spawn_req(t))})),t},e.lpop=function(e){return e.pending.shift()},e.rm=function(e,t){return o.remove(e.open,t),e},e.MAX_OPEN_REQUESTS=3,e.MAX_PENDING=5,e.REQUEST_TIMEOUT_MS=4e3,e.REQUEST_TTL_MS=5e3,e.MAX_FAILURE_COUNT=3,e}();r.default=s}));t(s);var a=r((function(t,r){var n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};r.__esModule=!0;var i=n(s);r.default=i.default.of()}));t(a);var u=r((function(e,t){t.__esModule=!0,t.URL_PARAM=/:([a-zA-Z_]+)/g,t.prepare_url=function(e,r){return e.url.replace(t.URL_PARAM,(function(t){if((t=t.slice(1,t.length))in r)return r[t].toString();e.log.error(new Error("\n      preparing url["+e.url+"] failed\n      \n      parameter["+t+"] not detected in params:\n      \n      "+JSON.stringify(r,null,2)+"\n    "))}))}}));t(u);u.URL_PARAM,u.prepare_url;var c=r((function(e,t){t.__esModule=!0;var r=function(){function e(e){this.emitter=e}return e.prepare=function(e,t){var r=document.createEvent("Event");return r.initEvent(name,!1,!0),r.ns=e,r.data=t,r},e.of=function(t){return new e(t)},e.prototype.info=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.INFO,t))},e.prototype.error=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.ERROR,t))},e.prototype.warn=function(t){this.emitter.dispatchEvent(e.prepare(e.NAMESPACE.WARN,t))},e.NAMESPACE={INFO:"tracker:info",ERROR:"tracker:err",WARN:"tracker:warn"},e}();t.Log=r}));t(c);c.Log;var f=r((function(e,t){t.__esModule=!0,function(e){e.POST="POST",e.PUT="PUT",e.GET="GET"}(t.Verb||(t.Verb={}))}));t(f);f.Verb;var d=r((function(t,r){var n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};r.__esModule=!0;var d=n(a),l=n(s),p=o(u),v=o(i),h=function(){function e(t,r){void 0===r&&(r={});var n=this,i=this;if(this.emitter=t,this.url=r.url,this.log=c.Log.of(this.emitter),this.verb=r.verb,this.metadata=v.merge({},r.metadata||{}),this.rq=r.rq||d.default,this.events=r.events||[],this.required_keys=r.required_keys||[],this.optional_keys=r.optional_keys||[],this.listeners=[],this.valid_keys=this.required_keys.slice(0).concat(this.optional_keys),e.assert_emitter_api(this.emitter),void 0===e.verb[this.verb])throw new Error("invalid HTTP verb["+this.verb+"] passed");if("string"!=typeof this.url)throw new Error("invalid API url["+this.url+"] passed");e.TRACKERS.push(this),i.events.forEach((function(t){e.create_listener(n,t,(function(r){void 0===r&&(r={});var o=v.merge(i.metadata,{event_type:t},r.data||r),s=p.prepare_url(i,o),a=e.pluck_valid_keys(i,o),u=e.ensure_required_keys(i,a);if(u.length)return i.log.error("Tracker.validate_metadata() failed for \n            Event["+t+"]\n            missing keys: "+u+"\n            payload:\n              "+JSON.stringify(a,null,2));l.default.rpush(n.rq,[s,n.verb,a])}))}))}return e.of=function(t,r){return new e(t,r)},e.ensure_required_keys=function(e,t){return e.required_keys.filter((function(e){return!(e in t)}))},e.pluck_valid_keys=function(e,t){return v.pluck.apply(v,[t].concat(e.valid_keys))},e.merge_metadata=function(t,r){return void 0===r&&(r={}),t.metadata=e.pluck_valid_keys(t,v.merge(t.metadata,r)),t},e.assert_emitter_api=function(e){if("function"!=typeof(e||{}).addEventListener)throw new Error("Tracker() received an emitter that does not implement the addEventListener method");if("function"!=typeof(e||{}).removeEventListener)throw new Error("Tracker() received an emitter that does not implement the removeEventListener method")},e.create_listener=function(e,t,r){e.listeners.push([t,r]),e.emitter.addEventListener(t,r)},e.prototype.destroy=function(){var t=this;this.listeners.forEach((function(e){var r=e[0],n=e[1];return t.emitter.removeEventListener(r,n)})),delete this.rq,delete this.emitter,v.remove(e.TRACKERS,this)},e.prototype.put=function(t){return void 0===t&&(t={}),e.merge_metadata(this,t),this},e.TRACKERS=[],e.QUEUE=d.default,e.verb=f.Verb,e}();r.default=h}));t(d);var l=r((function(t,r){var n=e&&e.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=e&&e.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};r.__esModule=!0;var s=n(o);r.Device=s.default;var a=n(d);r.Tracker=a.default;var c=i(u);r.API=c}));t(l);var p=l.Device,v=l.Tracker,h=(l.API,Object.freeze({__proto__:null,ADS:2,ANALYTICS:4,NO_METERING:8})),m=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io"];function g(e,t){return!!~m.indexOf(e)||e.indexOf(t)===e.length-t.length}g.check_whitelist=function(e){return!!~m.indexOf(e)};var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function _(e){this.message=e}_.prototype=new Error,_.prototype.name="InvalidCharacterError";var b="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new _("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,n,i=0,o=0,s="";n=t.charAt(o++);~n&&(r=i%4?64*r+n:n,i++%4)?s+=String.fromCharCode(255&r>>(-2*i&6)):0)n=y.indexOf(n);return s};var w=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(b(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return b(t)}};function k(e){this.message=e}k.prototype=new Error,k.prototype.name="InvalidTokenError";var M=function(e,t){if("string"!=typeof e)throw new k("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(w(e.split(".")[r]))}catch(e){throw new k("Invalid token specified: "+e.message)}},S=k;function E(e,t){var r={};t=t||{};try{r=M(e),this.valid_jwt=!0}catch(e){}this.raw=e,this.data=JSON.parse(r.c||"{}"),this.exp=r.exp,t.require_valid_token&&E.validate(this)}M.InvalidTokenError=S,E.validate=function(e){if("string"==typeof e&&(e=new E(e)),!e||!e.raw){if(g.check_whitelist(window.location.hostname))return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");var t=window.location.hostname,r=g.bind(null,t);if(e.data.domain&&e.data.domain.length&&!e.data.domain.some(r))throw new Error("Domain not allowed");if(1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},E.id=function(e){if(e)return"string"==typeof e&&(e=new E(e)),e.data.id};var O={};for(var F in h)O[h[F]]=F;function A(e){if(!(this instanceof A))return new A(e);var t=this;t.grant=e,t.is_granted=function(e){var r=(t.grant&e)===e;return r||console.warn("No permission granted for feature(:%s)",O[e].toString().toLowerCase()),r}}A.of=A,A.from_token=function(e){var t=new E(e,{require_valid_token:!0});return A.of(t.data.acl)},A.permissions=h;var P=[].slice;function x(e,t){for(var r in t)e[r]=t[r];return e}function T(e,t,r){for(t=function(e){return Array.isArray(e)?e.slice(0):e.split(".")}(t);t.length;){if(null==e)return r;e=e[t.shift()]}return null==e?r:e}var N="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var R="timeupdate",j="playing",B="ended",I="seeked",C="reap",L="config",U={PING:"ping",DISPLAY:"display",VIEW:"view"};var V={3:!0,5:!0,7:!0,9:!0};var q=function(e){for(var t,r=0;r<16;r++)0==(3&r)&&(t=4294967296*Math.random()),e[r]=t>>>((3&r)<<3)&255;return e}(Array(16)).reduce((function(e,t,r){var n=(t+256).toString(16).substr(1);return e+(V[r]?"-":"")+n}),""),D=["sitegroup_id","session_id","media_id","site_id","player_id","video_type"],W=["created","position"],z=["player_version","device_info","created","source","category","category_id","autoplay","muted"];function G(e,t,r){if(!(this instanceof G))return new G(e,t,r);var n=this;return n.name=e.name||"RL::anonymous::"+Date.now(),n.locked=!1,n.ttl=t,n.unlock=function(){return n.locked=!1,n},n.run=function(){n.locked||(n.locked=setTimeout((function(){return e.apply(null,r),n.unlock()}),t))},n.cancel=function(){return n.locked&&clearTimeout(n.locked),n.unlock()},n}function X(e,t,r){if(!(this instanceof X))return new X(e,t,r);var n=this;n.last_idx=1,n.segment_duration=0,n.breakpoints=[],n.calculate_segment_info=function(){return t.duration/1===t.duration&&function(){var e=P.call(arguments),t=e.shift();return e.reduce(x,t)}(n,X.segment_info(t.duration))},n.run=function(){if(n.segment_duration||n.calculate_segment_info()){var e=X.select_watched_segments(n,t);0!=e.length&&t.emit(U.PING,{position:e})}},n.update=function(){n.calculate_segment_info(),X.select_watched_segments(n,t)}}X.segment_info=function(e){var t=e/100;return{segment_duration:t,breakpoints:Array.apply(null,Array(100)).map((function(e,r){return Math.floor(r*t*1e3)/1e3}))}},X.select_watched_segments=function(e,t){var r=e.last_idx||1,n=Math.floor(t.currentTime/e.segment_duration);return e.last_idx=n,n<r?[]:e.breakpoints.slice(r,n).map((function(t){return e.breakpoints.indexOf(t)}))};var Q=6e4;function J(e,t,r){if(!(this instanceof J))return new J(e,t,r);var n=this;n.last_tracked_ts=Date.now(),n.ticks=0,n.run=function(){var e=Date.now();e-n.last_tracked_ts<Q||(n.last_tracked_ts=e,++n.ticks,t.emit(U.PING,{position:60*n.ticks}))},n.update=function(){}}J.within=function(e,t,r){var n=e+t.right,i=e-t.left;return r<n&&r>i};var H=[U.DISPLAY,U.PING,U.VIEW];function K(e){var t=e.ads;return void 0!==t&&(void 0!==t.schedule&&("function"==typeof t.hasPreroll&&(t.currentRequests?t.currentRequests:!!t.adPlaying||!(!t.hasPreroll()||0!=t.nextIndex))))}function Y(){try{return window.location!==window.parent.location?document.referrer:document.location.href}catch(e){return!1}}function Z(e){e.ended||(e.ended=!0,e.comp.cancel(),e.ping())}var $=function(e,t){if("object"==typeof exports&&"undefined"!=typeof module)return t;"flowplayer"in e||(e.flowplayer={extensions:[]});var r=e.flowplayer;return"function"==typeof r?(r(t),t):(Array.isArray(r.extensions)||(r.extensions=[]),~r.extensions.indexOf(t)||r.extensions.push(t),t)}("undefined"!=typeof window?window:void 0!==N?N:{},(function(e,t,r){if(A.from_token(e.token).is_granted(A.permissions.ANALYTICS)&&!r.analytics){var n=r.analytics={ticker:void 0,last_media_id:void 0,ping:function(){n.ticker&&n.ticker.run()},comp:G((function(){n.ping()}),6e3),ended:void 0},i={device_info:[p.device,p.os].join(","),session_id:q,autoplay:r.autoplay,muted:r.muted,player_id:e.player_id},o=r.analytics.tracker=v.of(r,{verb:v.verb.POST,url:"https://ptm.flowplayer.com/:video_type/:sitegroup_id/:event_type",events:H,required_keys:D,optional_keys:[].concat(z).concat(W),metadata:i,video_type:e.live?"live":"vod"});r.on(C,(function(){o&&o.destroy(),o=0})),r.on(L,(function(t){if(o){var i=T(t,"data.metadata",{});if(i.media_id){var s=T(o,"metadata.media_id");if(!s||i.media_id!=s){var a=T(e,"analytics",{});o.put(i),o.put(a),o.put({video_type:e.live?"live":"vod",source:e.source||Y()||""}),n.ticker=e.live?J(n,r,o):X(n,r,o),n.ended=!1,r.emit(U.DISPLAY)}}}}));var s=void 0;r.on(j,(function(){if(o&&!s&&!function(e,t){return e.metadata.media_id&&e.metadata.media_id==t.last_media_id}(o,n)){o.put({muted:r.muted});var e=K(r);if(e)return s=function(e,t,r){if(e&&"function"==typeof e.then){var n=e.then(t);if("function"!=typeof r)return n;n.catch(r)}}(e,(function(){n.last_media_id=o.metadata.media_id,r.emit(U.VIEW),r.emit(U.PING,{position:[0]}),s=void 0}),(function(){s=void 0}));n.last_media_id=o.metadata.media_id,r.emit(U.VIEW),r.emit(U.PING,{position:[0]})}})),r.on(R,(function(){if(o&&!(s||K(r)||n.ended))return!e.live&&r.currentTime>=Math.floor(r.duration)?Z(n):void n.comp.run()})),r.on(I,(function(){o&&n.ticker&&n.ticker.update()})),r.on(B,(function(){o&&Z(n)}))}}));return $.Tracker=v,$}));

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).flowplayer=t()}(this,(function(){"use strict";var e=[].slice;function t(e,t){for(var n in t)e[n]=t[n];return e}function n(){var n=e.call(arguments),r=n.shift();return n.reduce(t,r)}function r(e){return Array.isArray(e)?e.slice(0):e.split(".")}function o(e,t,n){for(t=r(t);t.length;){if(null==e)return n;e=e[t.shift()]}return null==e?n:e}function i(e,t,n){var i=(t=r(t)).pop(),a=o(e,t);return a&&(a[i]=n),e}function a(e){return(e=parseInt(e,10))>=10?e:"0"+e}function u(t){return e.call(t)}function s(e){return"string"!=typeof e?e:isNaN(e)?"false"!=e&&("true"==e||e):Number(e)}var c=Object.freeze({__proto__:null,noop:function(){},safe:function(e,t){return function(){try{return e.apply(t,arguments)}catch(e){return null}}},extend:t,assign:n,make_path:r,lens:o,put:i,get:function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.onreadystatechange=function(){var e=r.status;e>=400&&n&&n(e),200==e&&4==r.readyState&&t(r.responseText)},r.send()},zero_pad:a,prettyTime:function(e){if(isNaN(e)||e>=Number.MAX_SAFE_INTEGER)return"";var t=e<0?"-":"";e=Math.abs(e);var n=Math.floor(e/3600),r=Math.floor(e/60);return e-=60*r,n>=1?t+n+":"+a(r-=60*n)+":"+a(e):t+a(r)+":"+a(e)},toArray:u,box:function(e){var t={val:e};return function(e){return void 0!==e&&(t.val=e),t.val}},as_bool:s});function f(e){return e.emit=function(n,r,o){o=o||{};var i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!1,!0),t}(n);return r&&t(i,{data:r||{}}),e.dispatchEvent(i),!1===o.return_self?i:e},e.on=function(t,n){return"string"==typeof t&&(t=t.split(" ")),t.forEach((function(t){e.addEventListener(t,n)})),e},e.off=function(t,n){return e.removeEventListener(t,n),e},e.one=e.once=function(t,n){return e.on(t,(function r(o){e.off(t,r),n(o)}))},e}var l="",d=" ",p=Array.isArray,E="undefined"!=typeof window&&f(window),A="undefined"!=typeof document&&f(document),v=["span","a","em","p","i"],m=v.concat(["div","strong","video","img","ol","ul","li","script"]),S="__flowplayer__";function y(e,t,n){var r=h(document.createElement(e));if(p(t)&&(n=t,t=!1),p(n)||(n=[n]),r.append(n.filter((function(e){return e}))),"object"!=typeof t)return r;for(var o in t)o in r?r[o]=t[o]:r.setAttribute(o,t[o]);return r}function h(e){return void 0===e?e:function(e){return e&&e[S]}(e)?e:function(e){var t=e.tagName;e[S]=1,e.find=function(t){var n=e.querySelector(t);return n?h(n):n},e.html=function(t){return e.innerHTML=t,e},e.empty=function(){return e.innerHTML=l,e},e.offset=function(){var t={top:0,left:0},n=e;do{t.left+=n.offsetLeft||0,t.top+=n.offsetTop||0}while(n=n.offsetParent);return t},e.innerWidth=function(){var t=getComputedStyle(e);return e.clientWidth-parseFloat(t.paddingLeft)-parseFloat(t.paddingRight)};var n=e.insert=function(t,n){return p(n)?n.map((function(n){return e.insert(t,n)}))[0]:h(n="string"==typeof n?e.insertAdjacentHTML(t,n):e.insertAdjacentElement?e.insertAdjacentElement(t,n):e.appendChild(n))};return e.append=n.bind(e,"beforeend"),e.prepend=n.bind(e,"afterbegin"),e.css=function(t,n){if("object"==typeof t){for(var r in t)e.css(r,t[r]);return e}return void 0===n?getComputedStyle(e)[t]:(1*n&&(n+="px"),e.style[t]=n,e)},e.show=function(){return e.css({display:~v.indexOf(t)?"inline":"block"})},e.hide=function(){return e.css({display:"none"})},e.remove=function(){var t=e.parentNode;t&&t.removeChild(e)},e.attr=function(t,n){return null==n?e.getAttribute(t):(e.setAttribute(t,n),e)},e.txt=function(t){return e.textContent=t,e},e.fp=function(t){return e.addClass("fp-"+t)},e.addClass=function(t){return t.split(d).forEach((function(t){e.hasClass(t)||(e.className+=(e.className?d:l)+t)})),e},e.removeClass=function(t){t=t.split(d);var n=e.className.split(d);return e.className=n.filter((function(e){return!~t.indexOf(e)})).join(" "),e},e.toggleClass=function(t,n){return void 0===n&&(n=!e.hasClass(t)),n?e.addClass(t):e.removeClass(t)},e.findAll=function(t){return u(e.querySelectorAll(t))},e.hasClass=function(t){return~e.className.split(d).indexOf(t)},e}(f(e))}function g(e,t){if("string"==typeof e&&"<"==e[0])return y(e.slice(1,-1),t);if("string"!=typeof e)return h(e);var n=t instanceof HTMLElement&&t.querySelector(".fp-"+e)||document.querySelector(e);return n?h(n):void 0}g.window=E,g.document=A,g.el=y,m.forEach((function(e){g[e]=function(t,n){return"string"==typeof t&&(t={class:t}),y(e,t,n)}}));var N=[];function T(){return N.filter((function(e){return!e.paused}))}var I=Object.freeze({__proto__:null,instances:N,playing:T}),_={MOUNT:"mount",ERROR:"error",CONTEXT_MENU:"contextmenu",CLICK:"click",DBL_CLICK:"dblclick",KEYUP:"keyup",KEYDOWN:"keydown",LOAD:"load",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_MOVE:"mousemove",TOUCH_START:"touchstart",TOUCH_MOVE:"touchmove",TOUCH_END:"touchend",TOUCH_CANCEL:"touchcancel",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_ENTER:"fullscreenenter",FULLSCREEN_EXIT:"fullscreenexit",FULLSCREEN_CHANGE:"fullscreenchange",WEBKIT_NEEDKEY:"webkitneedkey",METADATA:"loadedmetadata",DATA:"loadeddata",PROGRESS:"progress",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",VOLUME_CHANGE:"volumechange",PAUSE:"pause",PLAYING:"playing",PLAY:"play",WAITING:"waiting",CAN_PLAY:"canplay",ENDED:"ended",SEEKED:"seeked",SEEKING:"seeking",DURATION_CHANGE:"durationchange",BEFORE_PLAY:"beforeplay",BEFORE_PAUSE:"beforepause",STATE:"state",CUEPOINTS:"cuepoints",CUEPOINT_START:"cuepointstart",CUEPOINT_END:"cuepointend",VIEW_ENTER:"viewenter",VIEW_LEAVE:"viewleave",SOURCE:"src",RECOVER:"recover",REAP:"reap",CONFIG:"config",QUALITIES:"qualities",SET_QUALITY:"quality:set",NON_RECOVERABLE_ERROR:"error:fatal",RECOMMENDATIONS_READY:"recommendationsready",AUDIO_ONLY_SOURCE:"audioonlysource"},O={FULLSCREEN:"is-fullscreen",PLAYING:"is-playing",PAUSED:"is-paused",MUTED:"is-muted",LOADED:"is-loaded",LOADING:"is-loading",STARTING:"is-starting",SEEKING:"is-seeking",GRABBING:"is-grabbing",DISABLED:"is-disabled",SMALL:"is-small",TINY:"is-tiny",RTL:"is-rtl",ENDED:"is-ended",LIVE:"is-live",ERRORED:"is-error",WAITING:"is-waiting",AUTOPLAY:"is-autoplay",SEAMLESS:"is-seamless",NO_AUTOPLAY:"no-autoplay",TOGGLING:"is-toggling",LIVE_SEEKED:"is-live-seeked",NO_DVR:"no-timeline"};function w(e,t){try{var n=t.exec(e)[1];return parseFloat(n,10)}catch(e){return console.error(e),0}}function L(){var e="undefined"!=typeof document&&"undefined"!=typeof window,t=e?navigator.userAgent:"",n=/iP(hone|od)/i.test(t)&&!/iPad/.test(t)&&!/IEMobile/i.test(t),r=/Android/.test(t)&&!/Firefox/.test(t),o=/IEMobile/.test(t),i=o?w(t,/Windows Phone (\d+\.\d+)/):0,a=o?w(t,/IEMobile\/(\d+\.\d+)/):0,u=/^((?!chrome|android).)*safari/i.test(t),s=function(){if(!e)return!1;if(document.documentMode)return document.documentMode;for(var t=9;t>3;t--){var n=document.createElement("div");if(n.innerHTML="\x3c!--[if IE "+t+"]><span></span><![endif]--\x3e",n.getElementsByTagName("span").length)return t}return!1}();return{controls:!n&&(!o||i>=8.1&&a>=11),video:function(t){return e&&document.createElement("video").canPlayType(t)},lang:e&&(window.navigator.userLanguage||window.navigator.language),android:r,iphone:n,ie:s,safari:u,ios:e&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}}function R(e,t){var n=t.clientWidth;t.toggleClass(O.SMALL,n<600).toggleClass(O.TINY,n<400)}g.window&&g.window.on([_.LOAD,_.RESIZE],(function(){N.forEach((function(e){var t=e.root;t.prevWidth!=t.clientWidth&&(e.emit(_.RESIZE),t.prevWidth=t.clientWidth)}))}));var D=.5625;function C(e){var t=function(e){var t=e.getBoundingClientRect(),n=window.innerHeight,r=t.height,o=t.bottom,i=r/5;return t.top<=i&&t.top+r>n-i||o-r+i>=0&&o<n+i}(e.root);return e.in_viewport===t?e:(e.in_viewport=t,e.emit(t?_.VIEW_ENTER:_.VIEW_LEAVE),e)}g.window&&g.window.on(_.SCROLL,(function(){N.forEach(C)}));var P=[function(e,t,n){var r=!0;t.addClass("flowplayer"),R(0,t),n.on([_.LOAD_START,_.RESIZE],(function(){R(0,t)})),n.on(_.STATE,(function(e){Object.keys(n.playerState).forEach((function(n){t.toggleClass(n,e.data[n])}))})),n.on(_.TIME_UPDATE,(function(){n.setState(O.WAITING,!1)})),n.on(_.CONFIG,(function(){var r=n.paused&&(!e.autoplay||t.hasClass(O.NO_AUTOPLAY))&&0==n.currentTime;[O.LOADING,O.STARTING].forEach((function(e){n.setState(e,r)}))})),n.on(_.ENDED,(function(t){setTimeout((function(){if(!t.defaultPrevented){if(e.rewind&&!n.loop)return e.autoplay&&(e.autoplay=!1,n.setState(O.AUTOPLAY,!1),n.setState(O.SEAMLESS,!1)),n.setState(O.SEEKING,!0),n.one(_.SEEKED,(function(){n.setState(O.SEEKING,!1),n.pause(),n.setState(O.STARTING,!0)})),n.currentTime=0,e.poster&&n.hide();n.one(_.TIME_UPDATE,(function(){n.setState(O.ENDED,!1)})),n.transitionState(O.ENDED,O.PLAYING,e.loop||e.rewind?0:300)}}),0)})),n.on([_.SEEKING,_.SEEKED],(function(e){n.setState(O.SEEKING,e.type==_.SEEKING),n.setState(O.PAUSED,n.paused),n.setState(O.PLAYING,!n.paused)})),n.on(_.ENDED,(function(){r=!0})),n.on(L().ios?_.METADATA:_.DATA,(function(t){var r="src"!=t.type||!("none"==e.preload);n.setState(O.LOADED,r),n.setState(O.LOADING,!r)})),n.on([_.WAITING,_.CAN_PLAY,_.LOAD_START],(function(t){if(!n.hasState(O.SEEKING)&&(t.type!=_.CAN_PLAY||e.autoplay||n.setState(O.WAITING,!1),t.type!=_.LOAD_START||"none"!=e.preload||e.autoplay)){if(t.type==_.LOAD_START&&e.autoplay)return n.one(_.PLAYING,(function(){n.setState(O.WAITING,!1)}));t.type==_.WAITING&&[O.PLAYING,O.PAUSED].forEach(n.setState),n.setState(O.ENDED,!1);var r=[_.WAITING];n.setState(O.WAITING,r.indexOf(t.type)>-1)}})),n.on([_.PLAYING,_.PAUSE],(function(t){var o=t.type==_.PLAYING,i=n.currentTime==n.duration,a=o&&r&&e.autoplay||n.hasState(O.SEAMLESS)||n.hasState(O.WAITING);if(o&&(n.started=!0,n.show()),!e.seamless&&r&&n.setState(O.SEAMLESS,!1),o&&(r=!1),n.setState(O.WAITING,!1).setState(O.STARTING,!1),!i&&!n.hasState(O.SEEKING)){r&&n.setState(O.STARTING,!1);var u=o?O.PLAYING:O.PAUSED,s=o?O.PAUSED:O.PLAYING;n.transitionState(u,s,a?0:300),o&&(n.show(),n.setState(O.NO_AUTOPLAY,!1))}}))},function(e,t,n){var r=g.div({class:"fp-ratio"});r.set=function(e){e=function(e){if("number"==typeof e&&!isNaN(e))return Number(e);if("string"==typeof e){var t=e.split(":");return Number(t[1])/Number(t[0])}return e}(e||D),r.css("padding-top",isNaN(e)?e:100*e+"%")},t.reaper.put("aspect_ratio",r),t.append(r);var i=[_.DATA,_.METADATA];n.on(i,(function(){r.set(e.ratio||n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth)})),n.on(_.CONFIG,(function(e){r.set(o(e,"data.ratio",n.videoHeight&&n.videoWidth&&n.videoHeight/n.videoWidth))}))},function(e,t,n){C(n);var r={should_resume:e.autoplay,has_user_gesture:!1,locked:!1};n.one([_.TOUCH_END,_.CLICK],(function(){r.has_user_gesture=!0})),n.on(_.PLAY,(function(){r.locked||(r.should_resume=!0)})),n.on(_.PAUSE,(function(){r.locked||(r.should_resume=!1)})),n.on(_.CAN_PLAY,(function(t){if(e.autoplay&&!T().size)return n.in_viewport&&n.paused&&r.should_resume?n.togglePlay(!0):void 0})),e.autopause&&(n.on(_.VIEW_ENTER,(function(){r.should_resume&&n.togglePlay(!0)})),n.on(_.VIEW_LEAVE,(function(){var e=!n.paused;r.locked=!0,n.pause(),setTimeout((function(){r.should_resume=e,r.locked=!1}),0)})))}];function b(){return P.filter((function(e){return"function"==typeof e.wants}))}function G(e){return Array.isArray(e)?e.join("."):e}function U(e,t){return t.length-e.length}function M(e){if(void 0!==e){if(e.reaper)return e.reaper;if(!(this instanceof M))return new M(e);var t=e.reaper=this;return t.tree=e,t.props=[],t.push=function(e){return t.props=t.props.concat(e),t},t.put=function(n,r){return t.push(n),i(e,n,r),r},t.run=function(n){(n=Array.isArray(n)?n:[]).push(t);for(var r=t.props.map(G).sort(U);r.length;){var a=r.shift(),u=o(e,a);u&&u.reaper&&!~n.indexOf(u.reaper)&&u.reaper.run(n),i(e,a,0)}for(var s in t)delete t[s];delete n[n.indexOf(t)],e.reaper=0},t}}var Y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function k(e){this.message=e}k.prototype=new Error,k.prototype.name="InvalidCharacterError";var x="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new k("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,r,o=0,i=0,a="";r=t.charAt(i++);~r&&(n=o%4?64*n+r:r,o++%4)?a+=String.fromCharCode(255&n>>(-2*o&6)):0)r=Y.indexOf(r);return a};var W=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(x(e).replace(/(.)/g,(function(e,t){var n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(e){return x(t)}};function V(e){this.message=e}V.prototype=new Error,V.prototype.name="InvalidTokenError";var H=function(e,t){if("string"!=typeof e)throw new V("Invalid token specified");var n=!0===(t=t||{}).header?0:1;try{return JSON.parse(W(e.split(".")[n]))}catch(e){throw new V("Invalid token specified: "+e.message)}},F=V;H.InvalidTokenError=F;var K={OFF:0,ON:1,AUDIO_REQUIRED:2};function j(e,t){t.multiplay||N.forEach((function(t){e!=t&&(t.toggleFullScreen(!1),t.pause())}))}function B(e){e.setState(O.AUTOPLAY,!1),e.setState(O.WAITING,!1),e.setState(O.SEAMLESS,!1),e.setState(O.PAUSED,!0),e.setState(O.NO_AUTOPLAY,!0)}function q(e,t,n){var r=n.muted;return e.catch((function(e){if(t.paused)return"AbortError"==e.name&&20==e.code||function(e){return K.AUDIO_REQUIRED&e.autoplay}(n)?B(t):(n.muted=!0,t.toggleMute(!0),t.volume=0,t.play())})).then((function(){j(t,n)})).catch((function(e){if(n.autoplay=!1,n.muted=r,t.toggleMute(!1),!t.started)return B(t);console.error(e),t.emit(_.ERROR,e)}))}function z(e){switch(e){case"video/mpd":return"application/dash+xml";case"video/m3u8":return"application/x-mpegurl";default:return e}}function Q(e){var t=e.split("{"),n=t[1];return n?n.slice(0,-1).split(",").map((function(e){return{src:t[0]+e,type:z("video/"+e)}})):[{src:e,type:z("video/"+function(e){var t=document.createElement("a");t.href=e;var n=t.pathname&&t.pathname.split(".");return n.length>1&&n[n.length-1]}(e))}]}var X=["loop","muted","preload","autoplay"];function Z(e){var t=Array(e.length),n=0;if(0==e.length)return t;for(;n<e.length;)t[n]=[e.start(n),e.end(n)],n++;return t}function J(e,r,o){o.toJSON=function(){return{duration:o.duration,volume:o.volume,currentTime:o.currentTime,buffered:Z(o.buffered),played:Z(o.played),states:o.root.className}},o.setSrc=function(t){return"string"==typeof t&&(t=Q(t)),"function"!=typeof t.forEach&&(t=[t]),o.currentSrc&&(o.innerHTML=""),t.reverse().forEach((function(n,i){"string"==typeof n&&(n={src:n}),o.emit(_.SOURCE,n),o.original_src=n.src;var a=b().filter((function(t){return t.wants(n.src,n,e)}));if(a.length&&!1!==a.pop().call(o,e,r,o,n))return;/^audio\//.test(n.type||"")&&o.emit(_.AUDIO_ONLY_SOURCE),e.start_time&&(n.src=n.src+"#t="+e.start_time),!o.canPlayType(n.type)&&i<t.length-1||o.prepend(g("<source>",n).on(_.ERROR,(function(e){if(e.target.remove(),!(o.querySelectorAll("source").length>0)){var t=o.canPlayType(n.type)?4:5,r=n.src;o.emit(_.ERROR,{message:4==t?"Video not found: "+r:(n.type||r)+" is not supported",videoType:n.type,code:t,src:r})}})))})),o.currentSrc&&o.load(),"none"==e.preload&&o.render(),o},o.setState=function(e,t){var r={};return r[e]=t,(r=n({},o.playerState,r))[O.WAITING]&&(r[O.PLAYING]=!1),O.STARTING||(r[O.PAUSED]=!r[O.PLAYING]),o.playerState=r,o.emit(_.STATE,o.playerState)},o.hasState=function(e){return!!o.playerState[e]},o.transitionState=function(e,t,n){o.hasState(e)&&(n=0),n&&o.setState(O.TOGGLING,!0),o.setState(t,!1),o.setState(e,!0),n&&setTimeout((function(){o.setState(O.TOGGLING,!1)}),n)},o.render=function(){return o.emit(L().ios?_.METADATA:_.DATA),o.emit(_.CAN_PLAY),o},o.togglePlay=function(t,n){var r=function(e,t,n){var r="boolean"==typeof n;if("boolean"!=typeof n&&(n=e.paused),!e.emit(n?_.BEFORE_PLAY:_.BEFORE_PAUSE,{forced:r},{return_self:!1}).defaultPrevented)try{var o=n?e.play():e.pause();if(o&&"function"==typeof o.catch)return q(o,e,t);e.paused&&n&&0==e.currentTime&&B(e),j(e,t)}catch(t){e.emit(_.ERROR,t)}}(o,e,t);return"function"!=typeof n?r:"catch"in r?r.then(n):n()},o.toggleMute=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.muted=!o.muted,o.muted||o.volume||(o.volume=.5),o.emit(_.VOLUME_CHANGE)},o.toggleDisable=function(e){"boolean"!=typeof e&&(e=!o.disabled),o.setState(O.DISABLED,e),o.disabled=e},o.destroy=o.reap=function(e){o.pause();var t=N.indexOf(o);~t&&N.splice(t,1),o.emit(_.REAP),setTimeout((function(){o.setSrc([]),"function"==typeof e&&e()}),0)},o.setAttrs=function(e){X.forEach((function(t){var n=s(e[t]);if(n)return o.attr(t,n),void(t in o&&(o[t]=n));!1===n&&(o.removeAttribute(t),t in o&&(o[t]=n))}))},o.setOpts=function(n){if(0!=o.reaper){t(e,n);var i=!!e.autoplay&&!o.hasState(O.NO_AUTOPLAY);o.setState(O.AUTOPLAY,i),o.setState(O.RTL,!!e.rtl),o.setState(O.LIVE,!!e.live),o.setState(O.NO_DVR,!(!e.live||e.dvr)),o.setState(O.SEAMLESS,!(!e.seamless&&!i)),e.poster&&r.css("background-image","url("+e.poster+")"),o.emit(_.CONFIG,e)}}}function $(){if("undefined"==typeof document)return!1;var e=document.documentElement;return e&&"rtl"==e.getAttribute("dir")||!1}var ee="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{};var te=["localhost","127.0.0.1","0.0.0.0","s.codepen.io","cdpn.io"];function ne(e,t){return!!~te.indexOf(e)||e.indexOf(t)===e.length-t.length}function re(e,t){var n={};t=t||{};try{n=H(e),this.valid_jwt=!0}catch(e){}this.raw=e,this.data=JSON.parse(n.c||"{}"),this.exp=n.exp,t.require_valid_token&&re.validate(this)}function oe(e,n){if("function"!=typeof e){"string"==typeof n&&(n={src:n}),n=t({rtl:$(),controls:!0,preload:"none"},n);var r=g(e);if(!r)return console.error(new Error("Flowplayer: '"+e.toString()+"' not found"));if(r.video)return r.video;var o=function(e){try{return re.validate(e),{success:!0}}catch(e){return{success:!1,message:e.message}}}(n.token);if(!o.success)return ie(r,null,{reason:"token",details:o.message});if(L().ie>0&&r.addClass("poor-flex"),!L().video)return r.append(g.img({src:n.poster}));var i=M(r),a=i.put("video",function(e,t){var n=t.querySelector("video"),r=g(n||(e._video_element_callback?e._video_element_callback(e):document.createElement("video")));return r.addClass("fp-engine"),M(r),r.async=void 0!==n,r.async&&!r.paused?(r.setState(O.PLAYING,!0).setState(O.SEAMLESS,!0),r):(r.attr("playsinline",""),r.attr("webkit-playsinline",""),t.append(r),r)}(n,r));a.once(_.REAP,i.run),i.put("video.root",r),!~N.indexOf(a)&&N.push(a),J(n,r,a),a.setAttrs(n),P.forEach((function(e){"function"==typeof e.onapi&&e.onapi.call(oe,n,r,a)})),P.forEach((function(e){e.call(oe,n,r,a)})),a.reaper.put("opts",n),a.setOpts(n),n.src&&a.setSrc(n.src);var u=a.readyState;return u>0&&a.currentSrc&&a.emit(_.METADATA),u>2&&a.currentSrc&&a.emit(_.CAN_PLAY),"none"==n.preload&&a.paused&&a.currentSrc&&a.render(),a.emit(_.MOUNT),a.on(_.NON_RECOVERABLE_ERROR,(function(e){ie(r,a,e.data)})),a}for(var s=0;s<arguments.length;++s)P.push(arguments[s])}function ie(e,t,n){t&&t.destroy(),e.innerHTML="",e.removeClass("flowplayer"),e.addClass("flowplayer-fatal"),e.append(g.el("h2",{},"Playback error")),e.append(g.p({},"Are you the site owner?")),e.append(g.a({className:"troubleshoot",target:"_blank",href:"https://flowplayer.com/help/developers/troubleshooting?reason="+n.reason},"Troubleshoot")),e.append(g.a({},g.img({src:"https://flowplayer.com/user/pages/images/logo-white.png"}))),console.error(new Error(n.details||n.reason))}return ne.check_whitelist=function(e){return!!~te.indexOf(e)},re.validate=function(e){if("string"==typeof e&&(e=new re(e)),!e||!e.raw){if(ne.check_whitelist(window.location.hostname))return!0;throw new Error("No token provided in configuration")}if(!e.valid_jwt)throw new Error("Invalid token provided");var t=window.location.hostname,n=ne.bind(null,t);if(e.data.domain&&e.data.domain.length&&!e.data.domain.some(n))throw new Error("Domain not allowed");if(1e3*e.exp-Date.now()<0)throw new Error("Expired token");return!0},re.id=function(e){if(e)return"string"==typeof e&&(e=new re(e)),e.data.id},n(oe,function(){var e="undefined"!=typeof window?window:void 0!==ee?ee:{},t=e.flowplayer?e.flowplayer:{extensions:[]};return Array.isArray(t.extensions)||(t.extensions=[]),t}()),function(e){Array.isArray(e.extensions)&&e.extensions.forEach((function(e){P.push(e)})),e.version="2.3.2",e.commit="e8d4a0b213ea15f18a50f5e42a07e6d837ee5fd7",e.Players=I,e.instances=N,e.extensions=P,e.loaders=b,e.support=L,e.events=_,e.states=O,e.mq=g,e.jwt=H,e.util=c,e.observable=f,e.Reaper=M,e.autoplay=e.autoplay_options=K}(oe),"object"==typeof document&&"function"==typeof document.emit&&setTimeout(document.emit,0,"flowplayer:umd",oe),oe}));
